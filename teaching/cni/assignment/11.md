# 一、单项选择题

1. PING command can （　　）.
   - A. manipulates network routing tables
   - B. trace route to a remote host
   - C. test if a host is reachable across an IP network
   - D. displays and modifies the IP-to-physical address translation tables

2. PING command uses （　　）.
   - A. TCP
   - B. UDP
   - C. raw IP
   - D. IGMP

3. Pinging （　　） with all packets received successfully CANNOT tell the network interface card (NIC) is working properly.
   - A. 0.0.0.0
   - B. 59.77.7.25
   - C. 127.0.0.1
   - D. 192.168.1.1

4. When you execute the command line "ping （　　）" with all packets received successfully, network interface card (NIC) may NOT work.
   - A. 127.0.0.1
   - B. 0.0.0.0
   - C. 8.8.8.8
   - D. 255.255.255.255

5. （　　） forms a conceptual boundary in the protocol stack. Layers above it are realized by software, while layers below it are mainly related to hardware.
   - A. Internet
   - B. ICMP
   - C. ARP
   - D. DHCP

6. An ARP message is placed in the （　　） area.
   - A. frame payload
   - B. IP payload
   - C. IP options
   - D. TCP data

7. A traceroute application sends a series of （　　） messages with TTL set to 1, 2, 3, etc.
   - A. Echo Request
   - B. Echo Reply
   - C. Time Exceeded
   - D. Redirect

8. An IP Ping utilizes which ICMP control message?
   - A. Redirect
   - B. Source quench
   - C. Dest. Unreachable
   - D. Echo Request

9. FTP protocol uses （　　）.
   - A. TCP
   - B. UDP
   - C. raw IP
   - D. ICMP

10. ICMP protocol:
   - A. stands for International Commission on Missing Persons
   - B. stands for Internal Critical Monitoring Problem
   - C. uses TCP as transport protocol
   - D. is used by routers to inform hosts about unexpected events

11. In error reporting the encapsulated ICMP packet goes to （　　）
   - A. the sender
   - B. the receiver
   - C. a router
   - D. any of the above

12. 在 Windows 中运行 `route print` 命令后得到某主机的路由信息（摘录）如下。则该主机的 IP 地址为（　　）、子网掩码为（　　）、默认网关为（　　）。

**Active Routes (摘录)**

| Network Destination | Netmask | Gateway | Interface | Metric |
|---------------------|---------|---------|-----------|--------|
| 0.0.0.0             | 0.0.0.0 | 114.220.115.254 | 114.220.115.254 | 20 |
| 127.0.0.0           | 255.0.0.0 | 127.0.0.1 | 127.0.0.1 | 1 |
| 114.220.115.128     | 255.255.255.128 | 114.220.115.132 | 114.220.115.132 | 20 |
| 114.220.115.132     | 255.255.255.255 | 127.0.0.1 | 127.0.0.1 | 20 |
| 114.220.115.255     | 255.255.255.255 | 114.220.115.132 | 114.220.115.132 | 20 |
| 224.0.0.0           | 224.0.0.0 | 114.220.115.132 | 114.220.115.132 | 20 |
| 255.255.255.255     | 255.255.255.255 | 114.220.115.132 | 114.220.115.132 | 1 |

**Default Gateway:** 114.220.115.254

12-1. 问题1：该主机的 IP 地址是（　　）
   - A. 114.220.115.132
   - B. 114.220.115.254
   - C. 127.0.0.1
   - D. 224.0.0.1

12-2. 问题2：该主机的子网掩码是（　　）
   - A. 255.0.0.0
   - B. 255.255.255.0
   - C. 255.255.255.128
   - D. 255.255.255.255

12-3. 问题3：该主机的默认网关是（　　）
   - A. 114.220.115.132
   - B. 114.220.115.254
   - C. 127.0.0.1
   - D. 224.0.0.1

13. IPv4 address exhaustion is one of the motivation of IPv6, （　　） and （　　） overcomes such shortage and extends the life of IPv4.
   - A. CIDR; NAT
   - B. CDMA; CSMA
   - C. ICMP; ARP
   - D. DHCP; DNS

14. Ping command utilizes （　　） ICMP control message.
   - A. echo request
   - B. echo reply
   - C. time exceeded
   - D. redirect

15. The DHCP protocol uses （　　） to send messages.
   - A. TCP
   - B. UDP
   - C. raw IP
   - D. ICMP

16. The ping command uses ICMP to send （　　） message.
   - A. dest. unreachable
   - B. echo
   - C. redirect
   - D. time exceeded

17. We are assigned only one IP 210.34.0.2, but we can use （　　） to enable 3 devices to share the Internet connection.
   - A. NAT
   - B. DHCP
   - C. DNS
   - D. ARP

18. Which of the following statements about ICMP is NOT TRUE?
   - A. It contains message to report error and information.
   - B. It encapsulates messages in IP for transmission, and IP uses it to report problems.
   - C. If a datagram carrying ICMP error message causes an error, an error message is sent.
   - D. PING uses ICMP to carry echo messages.

19. Which of the following technologies is NOT used in ARP?
   - A. Broadcast
   - B. Cache
   - C. Look-up table
   - D. Forward

20. Which protocol translates IP address to a hardware address?
   - A. DHCP
   - B. NAT
   - C. ARP
   - D. HTTP

21. ICMP差错报告报文格式中，除了类型、代码和校验和外，还需加上（　　）。
   - A. 时间戳以表明发出的时间
   - B. 出错报文的前64比特以便源主机定位出错报文
   - C. 子网掩码以确定所在局域网
   - D. 回声请求与响应以判定路径是否畅通

22. 某客户端可以 ping 通同一网段内的部分计算机，原因可能是 （　　）。
   - A. 本机 TCP/IP 协议不能正常工作
   - B. 本机 DNS 服务器地址设置错误
   - C. 本机网络接口故障
   - D. 网络中存在访问过滤

23. （　　） 属于第三层 VPN 协议。
   - A. TCP
   - B. IPsec
   - C. PPPOE
   - D. SSL

24. 以下关于 DHCP 服务的说法中，正确的是 （　　）。
   - A. 在一个园区网中可以存在多台 DHCP 服务器
   - B. 默认情况下，客户端要使用 DHCP 服务需指定 DHCP 服务器地址
   - C. 默认情况下，客户端选择 DHCP 服务器所在网段的 IP 地址作为本地地址
   - D. 在 DHCP 服务器上，只能使用同一网段的地址作为地址池

25. DHCP 客户端通过 （　　） 方式发送 DHCP Discover 消息。
   - A. 单播
   - B. 广播
   - C. 组播
   - D. 任意播

26. RARP 协议的作用是 （　　）。
   - A. 根据 MAC 查 IP
   - B. 根据 IP 查 MAC
   - C. 根据域名查 IP
   - D. 查找域内授权域名服务器

27. ARP 协议数据单元封装在 （　　） 中传送。
   - A. IP 分组
   - B. 以太帧
   - C. TCP 段
   - D. ICMP 报文

28. 使用 traceroute 命令测试网络时可以 （　　）。
   - A. 检验链路协议是否运行正常
   - B. 检验目标网络是否在路由表中
   - C. 查看域名解析服务
   - D. 显示分组到达目标路径上经过的各个路由器

29. 若主机 hostA 的 MAC 地址为 aa-aa-aa-aa-aa-aa，主机 hostB 的 MAC 地址为 bb-bb-bb-bb-bb-bb。由 hostA 发出的查询 hostB 的 MAC 地址的帧格式如下图所示，则此帧中的目标 MAC 地址为（　　），ARP 报文中的目标 MAC 地址为（　　）。

【目标MAC | 源MAC | 协议类型 | ARP 报文 | CRC】
   - A. aa-aa-aa-aa-aa-aa
   - B. bb-bb-bb-bb-bb-bb
   - C. 00-00-00-00-00-00
   - D. ff-ff-ff-ff-ff-ff

30. 使用 traceroute 命令测试网络时可以 （　　）。
   - A. 检验链路协议是否运行正常
   - B. 检验目标网络是否在路由表中
   - C. 查看域名解析服务
   - D. 显示分组到达目标路径上经过的各个路由器

31. 若主机 hostA 的 MAC 地址为 aa-aa-aa-aa-aa-aa，主机 hostB 的 MAC 地址为 bb-bb-bb-bb-bb-bb。由 hostA 发出的查询 hostB 的 MAC 地址的帧格式如下图所示，则此帧中的目标 MAC 地址为（　　），ARP 报文中的目标 MAC 地址为（　　）。
【目标MAC | 源MAC | 协议类型 | ARP 报文 | CRC】
   - A. aa-aa-aa-aa-aa-aa
   - B. bb-bb-bb-bb-bb-bb
   - C. 00-00-00-00-00-00
   - D. ff-ff-ff-ff-ff-ff

32. 虽然 IPv4 地址已经告罄，为何 IPv6 在短时间内无法取代？
   - A. IPv6 不兼容 IPv4，更新系统需要花费大量的成本；
   - B. 无分类地址、DHCP 和 NAT 等技术提高 IPv4 地址利用率，延续了 IPv4 的生命；
   - C. Windows 操作系统不能很好地支持 IPv6；
   - D. 更好的协议 IPv9 已经在部署中。

33. 下列说法正确的是：
   - A. DHCP 服务器安装在路由器上；
   - B. 通过 NAPT 内网搭建网络服务器，可以映射到外网 IP 地址和端口，对外网提供服务；
   - C. 向 DHCP 服务器请求 IP 地址时，仅能在局域网内；
   - D. DHCP 是网络层协议。

# 二、简答题
34. 请简要说明 TraceRoute 和 PING 的原理。

35. 考虑如何利用 ICMP 协议对一个网络上的时延性能进行监控？

36. 学院的实验楼有上百台主机，而可分配的外网 IP 地址数量远远不足。

（1） 如何使这些主机连接到 Internet？并通过图示说明机房某台主机（IP 地址为 172.10.5.192，子网掩码为 255.255.255.0，在搜索引擎查询“ip”得到 59.77.7.12）访问厦大网站（210.34.0.12）时的 MAC 地址、IP 地址和端口号转换过程。

（2） 实验楼主机是否能通过 ARP 询问厦大网站的 MAC 地址？并说明原因。

（3） 当主机 172.10.5.192（MAC 地址：d0:76:e7:10:2f:1d）询问 172.10.5.129（MAC 地址：d0:76:e7:93:6a:52）对应的 MAC 地址时，应如何填写其以太网帧的源地址与目的地址？主机 172.10.5.129 应答时，如何应填写以太网帧的源地址与目的地址？

37. 什么是 ARP 缓存？ARP 如何使用其缓存？

38. 某网络拓扑如下图所示，其中路由器内网接口、DHCP 服务器、WWW 服务器与主机1均采用静态 IP 地址配置，相关地址信息见图中标注；主机2～主机N通过 DHCP 服务器动态获取 IP 地址等配置信息。请回答下列问题：

（1）DHCP 服务器可为主机2～主机N动态分配 IP 地址的最大范围是什么？主机2使用 DHCP 协议获取 IP 地址的过程中，发送的封装 DHCP Discover 报文的 IP 分组的源 IP 地址和目的 IP 地址分别是什么？

（2）若主机2的 ARP 表为空，则该主机访问 Internet 时，发出的第一个以太网帧的目的 MAC 地址是什么？封装主机2发往 Internet 的 IP 分组的以太网帧的目的 MAC 地址是什么？

（3）若主机1的子网掩码和默认网关分别配置为 255.255.255.0 和 111.123.15.2，则该主机是否能访问 WWW 服务器？是否能访问 Internet？请说明理由。

39. 某单位在内部局域网采用 Windows Server 2008R2 配置 DHCP 服务器。可动态分配的 IP 地址范围是 192.168.81.10~192.168.81.100 和 192.168.81.110~192.168.81.240；DNS 服务器的 IP 地址固定为 192.168.81.2。

**问题1** 在 DHCP 工作原理中，DHCP 客户端第一次登陆网络时向网络发出一个（1）广播包；DHCP 服务器从未租出的地址范围内选择 IP 地址，连同其他 TCP/IP 参数回复给客户端一个（2）包；DHCP 客户端根据最先抵达的回应，向网络发送一个（3）包，告知所有 DHCP 服务器它将指定接收哪一台服务器提供的 IP 地址，当 DHCP 服务器接收到客户端的回应之后，会给客户端发出一个（4）包，以确认 IP 租约正式生效。

（1）~（4）备选答案：

A. Dhcpdiscover   B. Dhcpoffer   C. Dhcprequest   D. Dhcpack

**问题2** DHCP 服务器具有三种 IP 地址分配方式：第一种是手动分配，即由管理员为少数特定客户端静态绑定固定的 IP 地址；第二种是（5），即为客户端分配租期为无限长的 IP 地址；第三种是（6），即为客户端分配一定有效期限的 IP 地址，到达使用期限后，客户端需要重新申请 IP 地址。

**问题3** 在 Windows Server 2022 上配置 DHCP 服务，图2-1 所示配置 IP 地址范围时“起始 IP 地址”处应填（7），“结束 IP 地址”处应填（8）；图2-2 所 示添加排除和延迟时“起始 IP 地址”处应填（9），“结束 IP 地址”处应填（10）。默认客户端获取的 IP 地址使用期限为（11）天；图2-3 所示的结果中实际配置的租约期限是（12）秒。

**问题4** 通过创建 DHCP 的 IP 保留功能，使静态 IP 地址的设备管理自动化。如果正在为新的客户端保留 IP 地址，或者正在保留一个不同于当前地址的新 IP 地址，应验证 DHCP 服务器是否租出该地址。如果地址已被租出，在该地址的客户端的命令提示符下键入 ipconfig/（13）命令来释放它；DHCP 服务器为客户端保留 IP 地址后，客户端需在命令提示符下键入 ipconfig/（14）命令重新向 DHCP 服务器申请地址租约。使用 ipconfig/（15）命令可查看当前地址租约等全部信息。

（13）~（15）备选答案：

A. all   B. renew   C. release   D. setclassid

# 三、程序设计题
40. 请编写一个遵守 ICMP 协议的 PING 客户端和服务器端程序，使之能配合 Windows 或 Linux 自带的 PING 程序使用。

41. 请编写一个简单的 DHCP 服务器实现，能够分配固定的 IP 地址（如：配置为 192.168.1.2）给客户端，尝试给同一子网内的机器分配地址。
