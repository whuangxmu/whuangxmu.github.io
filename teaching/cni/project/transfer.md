# 实验目的

通过完成项目，掌握应用层文件传输的原理；了解传输过程中的传输层协议选用、应用层协议设计、协议开发、误码等概念。

# 时间要求

- 预计完成时间：4 周
- 整理成果时间：1 周
- 提交时间：在第 9 周周日之前提交项目成果。

# 需求说明

学生需编写发送端（server）与接收端（client）软件，将指定文件夹中的所有文件（含子文件夹）传输到目标主机的指定文件夹。成绩将根据传输速率和软件质量排序并赋予积分。主要要求：

1. 支持 Windows 与 Linux 路径（服务器端与客户端可为不同平台）。
2. 支持递归传输：一个文件夹下的所有子文件夹及其文件应被即时/递归传输。 
3. 文件必须保证无误码输出：对发生误码的文件进行重传，若重传失败则记录失败并通知用户（不输出已损坏文件）。
4. 文件类型支持：可包含可执行文件、图像、视频、Office 文档、文本文件等。
5. 输入校验：对用户输入（路径、IP、端口等）须做有效性检验，程序不得因非法输入崩溃。
6. 支持压缩以提高传输效率（注意并非任何情况下压缩都能提升性能）。
7. 支持断点续传/差异更新：在一次传输中断或完成后，下次传输时根据文件差异仅更新必要内容。

# 输入 / 输出 接口

学生应提供一套用于测评的可执行程序，以下为接口约定（示例）。

## 服务器（server）命令行接口

- 调用格式（示例）：

```bash
server /opt/var 192.168.1.1 9999
```

- 参数说明：
  - `argv[1]`：服务器端根目录路径（本机真实地址），例如 `/opt/var` 或 `C:\share`。
  - `argv[2]`：监听的 IP 地址（用于提供服务），例如 `192.168.1.1`。
  - `argv[3]`：监听端口号，例如 `9999`。

## 客户端（client）命令行接口

- 调用格式（示例）：

```bash
client /home/user/data 192.168.1.1 9999
```

- 参数说明：
  - `argv[1]`：本地待传输目录路径（本机真实地址），例如 `/home/user/data` 或 `D:\data`。
  - `argv[2]`：目标服务器 IP 地址。
  - `argv[3]`：目标服务器端口号。

> 注：上述参数约定是最小需求；学生可扩展 CLI（例如增加并发数、压缩开关、校验模式等），但测试评测将以以上基础调用兼容为准。

# 技术建议

1. 开发语言建议：C / C++（推荐）或其他语言（如 Python），依据小组技术栈选择。
2. 关注点：文件分片、并发传输、重传机制、校验（例如 MD5/SHA256 校验每个文件或分片）、断点续传（使用文件快照或增量校验）、跨平台路径与权限处理。
3. 可选优化：传输前做可选压缩、采用差异同步（rsync 风格算法）、使用多路复用/并发连接提高吞吐量。
4. 测试环境：建议在不同平台（Windows / Linux）之间进行互通测试，并在局域网或受控环境中模拟网络抖动、丢包与延迟测试。

# 评分标准

该项目以传输速率与软件质量为主，建议评分方向：

- 传输正确性（必须）：确保没有误码或损坏文件输出（作为通过/不通过的硬性项）。
- 传输速率：在相同网络条件下，传输总速率越高得分越高。
- 可靠性与容错：断点续传、重传成功率、错误记录与可恢复性。
- 可用性与跨平台支持：在 Windows 与 Linux 之间互通能力。
- 软件质量：代码风格、错误处理、日志与用户提示、易用性（包含是否提供 GUI）。

鼓励同学在项目中提出并说明自己的评测建议或优化点。
